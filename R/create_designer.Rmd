---
title: "Creating a designer"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Put the title of your vignette here}
  %\VignetteEngine{knitr::rmarkdown}
  \usepackage[utf8]{inputenc}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


A designer is a function to easily and flexibly create designs. 

### Formal Arguments
The parameters that will be used in the design should be included as the formal arguments of the designer function

```{r, eval=FALSE}
my_designer <- function(N = 100,
                        prob = .5
                        )
{
    
                     
```
##  Design's Code
A set of steps starting with declare_population and ending with declare_design. The code needs to be wrapped around triple brackets: {{{ }}}.
```{r, eval=FALSE}

{{{ 
my_population <- declare_population(N = N, noise = rnorm(N))

my_potential_outcomes <- declare_potential_outcomes(Y ~ Z + noise)

my_assignment <- declare_assignment(prob = prob)

my_estimand <- declare_estimand(ATE = mean(Y_Z_1 - Y_Z_0))

my_estimator <- declare_estimator(Y ~ Z, estimand = my_estimand)

my_reveal <- declare_reveal()

my_design <- declare_design(my_population,
                         my_potential_outcomes,
                         my_estimand,
                         my_assignment,
                         my_reveal,
                         my_estimator)
}}}
```
## Attributes
There must be an attribute containg the design's code
```{r, eval=FALSE}
 attr(my_designer, "code") <- 
    construct_design_code(my_designer, match.call.defaults())

```


Additionally, a few more attributes should/could be included

```{r, eval=FALSE}
attr(simple_two_arm_designer, "tips") <-
  list(
    N = "Number of blocks",
    prob = "Probability of assignment to treatment"
  )

attr(simple_two_arm_designer, "description") <- "
<p> A design of sample size <code>N</code> and probability of assignment <code>prob</code>.
"
```

If a designer is linked to a design or to other designers this should be defined in attribute 'seealso'
```{r, eval=FALSE}
# (Include hyperlink)
attr(simple_two_arm_designer, "seealso") <- c("my_design", "my_designer_2")
```

And in some cases a designer has a shiny attribute. This how you define it.

## Return Value
The last line in the code must call the design
```{r, eval=FALSE}
my_design
}
```

## Documentation
The documentation should be included as Roxygen comments
```{r, eval=FALSE}
#' Create a design
#' @param N Number of units
#' @param code If TRUE designer returns the code of a design 
#' @return a function that returns a design
#' @export
#'
#' @examples
#' my_design <- my_designer()
```



(see http://r-pkgs.had.co.nz/man.html#roxygen-comments for more details)
