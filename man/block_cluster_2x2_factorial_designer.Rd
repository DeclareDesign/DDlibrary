% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/block_cluster_2x2_factorial_designer.R
\name{block_cluster_2x2_factorial_designer}
\alias{block_cluster_2x2_factorial_designer}
\title{Create a block and cluster 2 by 2 factorial design with binary outcomes option}
\usage{
block_cluster_2x2_factorial_designer(N = NULL, N_blocks = 1,
  N_clusters_in_block = ifelse(is.null(N), 100, round(N/N_blocks)),
  N_i_in_cluster = ifelse(is.null(N), 2, round(N/mean(N_blocks *
  N_clusters_in_block))), binary = FALSE, prob_A = 0.5, prob_B = 0.5,
  weight_A = 0.5, weight_B = 0.5, outcome_means = rep(0, 4),
  mean_A0B0 = outcome_means[1], mean_A0B1 = outcome_means[2],
  mean_A1B0 = outcome_means[3], mean_A1B1 = outcome_means[4], sd = 1,
  sd_block = 0.5773 * sd, sd_cluster = max(0, (sd^2 -
  sd_block^2)/2)^0.5, sd_i = max(0, sd^2 - sd_block^2 -
  sd_cluster^2)^0.5, verbose = TRUE)
}
\arguments{
\item{N}{An integer. Total number of units. Usually not specified as \code{N} is determined by \code{N_blocks}, \code{N_clusters_in_block}, and \code{N_i_in_cluster}. If \code{N_blocks}, and  \code{N_clusters_in_block}, and \code{N_i_in_cluster} are specified then \code{N} is overridden. If these are not specified and \code{N} is specified then designer attempts to guess sizes of levels to approximate \code{N}, with preference for a design without blocks or clusters.}

\item{N_blocks}{An integer. Number of blocks. Defaults to 1 for no blocks.}

\item{N_clusters_in_block}{An integer or vector of integers of length \code{N_blocks}. Number of clusters in each block. This is the total \code{N} when \code{N_blocks} and \code{N_i_in_cluster} are at default values.}

\item{N_i_in_cluster}{An integer or vector of integers of length \code{sum(N_clusters_in_block)}. Individuals per cluster. Defaults to 1 for no clusters.}

\item{binary}{Logical: a binary outcome generated using probit approach.}

\item{prob_A}{A number in [0,1]. Probability of assignment to treatment A.}

\item{prob_B}{A number in [0,1]. Probability of assignment to treatment B.}

\item{weight_A}{A number. Weight placed on A=1 condition in definition of "average effect of B" estimand.}

\item{weight_B}{A number. Weight placed on B=1 condition in definition of "average effect of A" estimand.}

\item{outcome_means}{A vector of length 4. Average outcome in each A,B condition, in order AB = 00, 01, 10, 11. Values overridden by mean_A0B0, mean_A0B1, mean_A1B0, if provided mean_A1B1.}

\item{mean_A0B0}{A number. Mean outcome in A=0, B=0 condition.}

\item{mean_A0B1}{A number. Mean outcome in A=0, B=1 condition.}

\item{mean_A1B0}{A number. Mean outcome in A=1, B=0 condition.}

\item{mean_A1B1}{A number. Mean outcome in A=1, B=1 condition.}

\item{sd}{A nonnegative number. Overall standard deviation (combining individual level, cluster level, and block level shocks). Defaults to 1. Overridden if incompatible with other user-specified shocks.}

\item{sd_block}{A nonnegative number. Standard deviation of block level shocks.}

\item{sd_cluster}{A nonnegative number. Standard deviation of cluster level shock.}

\item{sd_i}{A nonnegative number. Standard deviation of individual level shock.}

\item{verbose}{Logical. Return details on design.}
}
\value{
A two-by-two factorial design.
}
\description{
Builds a two-by-two factorial design in which assignments to each factor are independent of each other, allows blocks an clusters.
}
\details{
Three types of estimand are declared. First, weighted averages of the average treatment effects of each treatment, given the two conditions of the other treatments. Second and third, the difference in treatment effects of each treatment, given the conditions of the other treatment.

Units are assigned to treatment using complete random assignment. Potential outcomes follow a normal distribution.

Treatment A is assigned first and then Treatment B within blocks defined by treatment A. Thus, if there are 6 units 
3 are guaranteed to receive treatment A but the number receiving treatment B is stochastic.

See \code{\link{multi_arm_designer}} for a factorial design with non independent assignments.
}
\examples{
design <- block_cluster_2x2_factorial_designer(outcome_means = c(0,0,0,1))

# A design biased for the specified estimands:
design <- block_cluster_2x2_factorial_designer(outcome_means = c(0,0,0,1), prob_A = .8, prob_B = .2)
\dontrun{
diagnose_design(design)
}

# A design with estimands that "match" the assignment:
design <- block_cluster_2x2_factorial_designer(outcome_means = c(0,0,0,1), 
                                    prob_A = .8, prob_B = .2, 
                                    weight_A = .8, weight_B = .2)
\dontrun{
diagnose_design(design)
}

# Compare power with and without interactions, given same average effects in each arm
designs <- redesign(block_cluster_2x2_factorial_designer(), 
                    outcome_means = list(c(0,0,0,1), c(0,.5,.5,1)))
\dontrun{
diagnose_design(designs)
}

}
\author{
\href{https://declaredesign.org/}{DeclareDesign Team}
}
\concept{experiment factorial}
